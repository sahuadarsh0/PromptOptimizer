<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prompt Optimizer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="index.css">
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
  }
}
</script>
</head>
<body class="bg-zinc-900 text-white font-sans flex justify-center items-start sm:items-center min-h-screen p-4">
  <div id="particle-container"></div>

  <main class="relative z-10 bg-zinc-800/50 backdrop-blur-sm border border-zinc-700 p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-6xl space-y-6">
    <header class="flex justify-between items-center">
      <div class="text-left">
        <h1 class="text-2xl sm:text-3xl font-bold text-white">
          Prompt Optimizer
        </h1>
        <p class="text-zinc-400 mt-1 text-sm sm:text-base">Refine your prompts for better AI responses.</p>
      </div>
      <button id="history-button" class="flex items-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-sm font-medium py-2 px-4 rounded-lg transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-400"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M12 8v4l2 2"></path></svg>
        History
      </button>
    </header>

    <!-- Configuration Section -->
    <section id="config-section" class="bg-zinc-900/50 border border-zinc-700 p-4 rounded-xl space-y-4">
        <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4">
             <h2 class="text-lg font-semibold text-zinc-200">Configuration</h2>
             <div class="relative group sm:w-64">
                <label for="model-select" class="block text-sm font-medium text-zinc-400 mb-1 flex items-center gap-1">
                  Model
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-500"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                </label>
                 <div class="absolute bottom-full right-0 mb-2 w-72 p-2 bg-zinc-700 text-zinc-200 text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10">
                    Choose the Gemini model for optimization. Models are loaded dynamically.
                </div>
                <select id="model-select" class="w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50" disabled>
                    <option>Loading models...</option>
                </select>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-2">
            <!-- Optimization Goal -->
            <fieldset class="lg:col-span-2">
                <div class="relative group flex items-center gap-1 mb-3">
                  <legend class="text-base font-medium text-zinc-300">Optimization Goal</legend>
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-500"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                   <div class="absolute bottom-full left-0 mb-2 w-80 p-2 bg-zinc-700 text-zinc-200 text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10">
                    Select a goal to tailor the prompt. 'Standard' is for general use, 'Reasoning' for complex logic, 'Coding' for programming tasks, and 'Writing' for creative content.
                  </div>
                </div>
                <div id="optimization-goal-container" class="grid grid-cols-2 gap-x-4 gap-y-3">
                    <div class="flex items-center">
                        <input id="goal-general" name="optimization-goal" type="radio" value="general" class="h-4 w-4 text-cyan-500 bg-zinc-700 border-zinc-600 focus:ring-cyan-600" checked>
                        <label for="goal-general" class="ml-3 block text-sm font-medium text-zinc-400">Standard Prompt</label>
                    </div>
                    <div class="flex items-center">
                        <input id="goal-reasoning" name="optimization-goal" type="radio" value="reasoning" class="h-4 w-4 text-cyan-500 bg-zinc-700 border-zinc-600 focus:ring-cyan-600">
                        <label for="goal-reasoning" class="ml-3 block text-sm font-medium text-zinc-400">Reasoning Prompt</label>
                    </div>
                    <div class="flex items-center">
                        <input id="goal-coding" name="optimization-goal" type="radio" value="coding" class="h-4 w-4 text-cyan-500 bg-zinc-700 border-zinc-600 focus:ring-cyan-600">
                        <label for="goal-coding" class="ml-3 block text-sm font-medium text-zinc-400">Efficient Coding</label>
                    </div>
                    <div class="flex items-center">
                        <input id="goal-writing" name="optimization-goal" type="radio" value="writing" class="h-4 w-4 text-cyan-500 bg-zinc-700 border-zinc-600 focus:ring-cyan-600">
                        <label for="goal-writing" class="ml-3 block text-sm font-medium text-zinc-400">Creative Writing</label>
                    </div>
                </div>
                 <!-- Tone Selection -->
                <div class="mt-4 relative group">
                    <label for="tone-select" class="block text-sm font-medium text-zinc-400 mb-1 flex items-center gap-1">
                      Tone (for Writing)
                      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-500"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    </label>
                    <div class="absolute bottom-full left-0 mb-2 w-72 p-2 bg-zinc-700 text-zinc-200 text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10">
                      Sets the desired tone for the AI's response. This is only enabled when the 'Creative Writing' goal is selected.
                    </div>
                    <select id="tone-select" class="w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed transition-opacity text-sm" disabled>
                        <option value="default">Default Tone</option>
                        <option value="creative">Creative</option>
                        <option value="formal">Formal</option>
                        <option value="informal">Informal</option>
                        <option value="friendly">Friendly</option>
                        <option value="with-emojis">With Emojis</option>
                    </select>
                </div>
            </fieldset>

            <!-- Advanced Optimization -->
            <div id="advanced-strategy-container">
                <div class="relative group">
                  <div class="flex items-center mb-3">
                      <input id="use-advanced-checkbox" type="checkbox" class="h-4 w-4 rounded bg-zinc-700 border-zinc-600 text-cyan-500 focus:ring-cyan-600">
                      <label for="use-advanced-checkbox" class="ml-3 text-base font-medium text-zinc-300 flex items-center gap-1">
                        Use Advanced Framework
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-500"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                      </label>
                  </div>
                  <div class="absolute bottom-full left-0 mb-2 w-80 p-2 bg-zinc-700 text-zinc-200 text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10">
                    Use structured prompt engineering frameworks (e.g., RACE, APE) for highly specific and detailed instructions. This overrides the standard Optimization Goal.
                  </div>
                </div>
                <label for="advanced-strategy-select" class="block text-sm font-medium text-zinc-400 mb-1">Framework</label>
                <select id="advanced-strategy-select" class="w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed transition-opacity text-sm" disabled>
                    <option value="race">Race (Role, Action, Context, Explanation)</option>
                    <option value="care">Care (Context, Action, Result, Example)</option>
                    <option value="ape">Ape (Action, Purpose, Execution)</option>
                    <option value="create">Create (Character, Request, Examples, Adjustments, Type, Extras)</option>
                    <option value="tag">Tag (Task, Action, Goal)</option>
                    <option value="creo">Creo (Context, Request, Explanation, Outcome)</option>
                    <option value="rise">Rise (Role, Input, Steps, Execution)</option>
                    <option value="pain">Pain (Problem, Action, Information, Next Steps)</option>
                    <option value="coast">Coast (Context, Objective, Actions, Scenario, Task)</option>
                    <option value="roses">Roses (Role, Objective, Scenario, Expected Solution, Steps)</option>
                </select>
            </div>
        </div>
    </section>

    <div class="space-y-6">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Input Column -->
        <div class="space-y-4">
            <div>
                 <div class="flex justify-between items-center mb-3">
                    <label for="input-prompt" class="text-lg font-semibold text-zinc-300">Your Prompt</label>
                    <div class="flex items-center gap-2">
                        <!-- Translating Loader -->
                        <div id="translating-loader" class="hidden">
                            <svg class="animate-spin h-5 w-5 text-cyan-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </div>
                        <button id="mic-button" class="p-2 rounded-full transition-colors bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Start Recording" title="Start Recording">
                            <!-- Mic Icon (default) -->
                            <svg id="mic-icon" class="text-zinc-300" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                <line x1="12" y1="19" x2="12" y2="22"></line>
                            </svg>
                            <!-- Stop Icon (hidden by default) -->
                             <svg id="stop-mic-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="hidden text-red-400">
                               <rect width="12" height="12" x="6" y="6" rx="1"></rect>
                            </svg>
                        </button>
                    </div>
                </div>
                <textarea id="input-prompt" class="w-full h-48 bg-zinc-900 border border-zinc-700 rounded-lg p-4 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow resize-none" placeholder="e.g., a cat wearing a hat"></textarea>
            </div>
            <div>
                <label for="negative-prompt" class="text-base font-semibold text-zinc-300 mb-2">Negative Prompt <span class="text-sm text-zinc-400 font-normal">(what to avoid)</span></label>
                <textarea id="negative-prompt" class="w-full h-24 bg-zinc-900 border border-zinc-700 rounded-lg p-4 text-zinc-200 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow resize-none" placeholder="e.g., blurry, ugly, text, watermark"></textarea>
            </div>
        </div>

        <!-- Output Column -->
        <div class="flex flex-col space-y-3">
          <div class="flex justify-between items-center">
            <label for="output-prompt" class="text-lg font-semibold text-zinc-300">Optimized Prompt</label>
            <button id="copy-button" class="flex items-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-sm font-medium py-1.5 px-3 rounded-lg transition-colors disabled:opacity-50" disabled>
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>
              <span id="copy-button-text">Copy</span>
            </button>
          </div>
          <div class="relative h-80 lg:h-full">
            <textarea id="output-prompt" readonly class="bg-zinc-900 border border-zinc-700 rounded-lg p-4 text-zinc-300 cursor-not-allowed resize-none w-full h-full" placeholder="Optimized prompt will appear here..."></textarea>
            <div id="output-loader" class="absolute inset-0 bg-zinc-900/80 rounded-lg flex flex-col items-center justify-center gap-3 hidden transition-opacity">
              <svg class="animate-spin h-8 w-8 text-cyan-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <p class="text-zinc-400 text-sm">Optimizing...</p>
            </div>
          </div>
        </div>
      </div>

       <!-- Action Column -->
      <div class="text-center pt-2">
        <div id="action-button-container" class="grid items-center justify-center">
          <button id="optimize-button" class="bg-cyan-500 hover:bg-cyan-600 text-zinc-900 font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out disabled:opacity-50 disabled:cursor-wait w-48 col-start-1 row-start-1">
            <span>Optimize</span>
          </button>
          <button id="stop-button" class="hidden bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out w-48 flex items-center justify-center gap-2 col-start-1 row-start-1">
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"></rect></svg>
            <span>Stop</span>
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- History Modal -->
  <div id="history-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden" aria-modal="true" role="dialog">
    <div class="bg-zinc-800 border border-zinc-700 w-full max-w-2xl rounded-2xl shadow-xl flex flex-col max-h-[80vh]">
      <header class="p-4 border-b border-zinc-700 flex justify-between items-center">
        <h2 class="text-xl font-bold">Prompt History</h2>
        <button id="close-modal-button" class="text-zinc-400 hover:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </header>
      <div id="history-modal-content" class="p-6 overflow-y-auto space-y-3">
        <!-- History items will be injected here -->
      </div>
       <footer class="p-4 border-t border-zinc-700 mt-auto">
         <button id="clear-history-button" class="w-full bg-red-500/20 text-red-300 hover:bg-red-500/30 hover:text-red-200 text-sm font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50">Clear All History</button>
       </footer>
    </div>
  </div>

  <!-- Donate Button -->
  <a href="https://paypal.me/sahuadarsh0" target="_blank" rel="noopener noreferrer" 
     class="fixed bottom-4 left-4 z-20 flex items-center gap-2 bg-zinc-800/80 backdrop-blur-sm border border-zinc-700 hover:bg-zinc-700/80 text-sm font-medium py-2 px-3 rounded-lg transition-all hover:scale-105"
     title="Support the developer">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="text-pink-400">
        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
    </svg>
    <span class="text-zinc-300 hidden sm:inline">Support Me</span>
  </a>

  <script type="module" src="index.tsx"></script>
</body>
</html>